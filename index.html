<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ì•ˆì „ ë¬¼ë†€ì´ ë°©íƒˆì¶œ!</title>
    <style>
        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background-color: #1e1e1e;
        }

        /* ì‹œì‘ í™”ë©´ ìŠ¤íƒ€ì¼ */
        #start-screen {
            position: fixed; top: 0; left: 0; z-index: 200;
            width: 100%; height: 100%;
            display: flex; justify-content: center; align-items: center;
            background-color: rgba(0, 0, 0, 0.85);
            color: white;
        }
        .start-box {
            background: linear-gradient(145deg, #2c3e50, #34495e);
            padding: 40px 50px;
            border-radius: 20px;
            text-align: center;
            border: 2px solid #3498db;
            box-shadow: 0 0 30px rgba(52, 152, 219, 0.5);
        }
        .start-box h2 {
            margin-top: 0; font-size: 2.5em; color: #f1c40f;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .start-box p { font-size: 1.1em; color: #ecf0f1; margin-bottom: 30px; }
        .start-box input {
            display: block; margin: 15px auto; width: 250px;
            padding: 12px; font-size: 1.1em; border-radius: 8px;
            border: 2px solid #bdc3c7; text-align: center;
        }
        .start-box button {
            font-size: 1.3em; font-weight: bold; padding: 15px 40px; margin-top: 20px;
            border-radius: 10px; border: none; cursor: pointer;
            background-color: #e67e22; color: white;
            transition: transform 0.2s, background-color 0.2s;
        }
        .start-box button:hover { background-color: #d35400; transform: scale(1.05); }


        /* ê²Œì„ ì»¨í…Œì´ë„ˆ - ì‹œì‘ ì‹œì—ëŠ” ìˆ¨ê²¨ì§ */
        #game-container {
            display: none;
            position: relative;
            width: 1000px;
            height: 667px;
            background-image: url('https://github.com/hsb0325/-/blob/main/Whisk_a4dcb56a8b.jpg?raw=true');
            background-size: cover; background-position: center;
            border: 2px solid #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
        }
        
        /* í´ë¦­ ê°€ëŠ¥í•œ ì˜¤ë¸Œì íŠ¸ë“¤ì˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .clickable-object {
            position: absolute;
            cursor: pointer;
            /* ê°œë°œ ì¤‘ ìœ„ì¹˜ í™•ì¸ì´ í•„ìš”í•˜ì‹œë©´ ì´ ì¤„ì˜ ì£¼ì„ì„ í‘¸ì„¸ìš” */
            /* border: 2px dashed yellow; */
            transition: background-color 0.2s;
        }
        .clickable-object:hover {
            background-color: rgba(255, 255, 0, 0.3);
        }
        .clickable-object.solved {
            pointer-events: none;
        }

        /* ================================================ */
        /* ì œê³µëœ ì´ë¯¸ì§€ì— ë§ì¶˜ ìµœì¢… ì˜¤ë¸Œì íŠ¸ ìœ„ì¹˜ì…ë‹ˆë‹¤. */
        #obj-monitor { top: 305px; left: 683px; width: 135px; height: 160px; }
        #obj-speaker { top: 465px; left: 478px; width: 125px; height: 175px; }
        #obj-clock { top: 119px; left: 479px; width: 45px; height: 45px; }
        #obj-pencilcase { top: 370px; left: 645px; width: 55px; height: 80px; }
        #obj-door { top: 200px; left: 820px; width: 85px; height: 310px; }
        /* ================================================ */

        /* ëª¨ë‹¬ ì°½ ìŠ¤íƒ€ì¼ */
        #modal-container { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.75); z-index: 100; justify-content: center; align-items: center; }
        #modal-content { background-color: #fff; padding: 30px; border-radius: 15px; width: 90%; max-width: 550px; text-align: center; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        #modal-content h2 { margin-top: 0; color: #005a9c; }
        #modal-content p { font-size: 1.1em; }
        #modal-content input { font-size: 1.2em; padding: 10px; margin: 10px 0; border: 2px solid #ccc; border-radius: 5px; text-align: center; }
        #modal-content button { font-size: 1.1em; padding: 10px 20px; margin: 5px; border-radius: 8px; border: none; cursor: pointer; background-color: #007bff; color: white; transition: background-color 0.2s; }
        #modal-content button:hover { background-color: #0056b3; }
        #modal-content button.close-btn { background-color: #6c757d; }
        #modal-content button.close-btn:hover { background-color: #5a6268; }
        
        /* ë©”ëª¨ë¦¬ ì¹´ë“œ ê²Œì„ ìŠ¤íƒ€ì¼ */
        #memory-board { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin: 20px auto; max-width: 400px; }
        .card { width: 100%; aspect-ratio: 3 / 4; background-color: #88cff1; display: flex; justify-content: center; align-items: center; font-size: 2.5em; cursor: pointer; transform-style: preserve-3d; transition: transform 0.6s; border-radius: 10px; }
        .card .front, .card .back { position: absolute; backface-visibility: hidden; }
        .card .back { transform: rotateY(180deg); }
        .card.flipped { transform: rotateY(180deg); }
        .card.matched { background-color: #b2fab4; cursor: default; transform: rotateY(180deg); }
        
        /* í•˜ë‹¨ íŒíŠ¸ ì¸ë²¤í† ë¦¬ */
        #hint-inventory { position: absolute; bottom: 10px; left: 50%; transform: translateX(-50%); background-color: rgba(0, 0, 0, 0.6); color: white; padding: 10px 20px; border-radius: 10px; display: flex; align-items: center; gap: 15px; }
        #hint-inventory span { background-color: #fff; color: #333; font-weight: bold; padding: 8px 12px; border-radius: 5px; font-size: 1.2em; }
    </style>
</head>
<body>
    <!-- ì‹œì‘ í™”ë©´ -->
    <div id="start-screen">
        <div class="start-box">
            <h2>ì•ˆì „ ë¬¼ë†€ì´ ë°©íƒˆì¶œ</h2>
            <p>êµì‹¤ì„ íƒˆì¶œí•˜ê³  ì•ˆì „ ìˆ˜ì¹™ì„ ë°°ì›Œë³´ì„¸ìš”!</p>
            <input type="text" id="grade-input" placeholder="í•™ë…„">
            <input type="text" id="class-input" placeholder="ë°˜">
            <input type="text" id="name-input" placeholder="ì´ë¦„">
            <button id="start-button">ê²Œì„ ì‹œì‘!</button>
        </div>
    </div>

    <!-- ê²Œì„ í™”ë©´ (ì´ˆê¸°ì—ëŠ” ìˆ¨ê¹€) -->
    <div id="game-container">
        <div class="clickable-object" id="obj-monitor" data-id="monitor"></div>
        <div class="clickable-object" id="obj-speaker" data-id="speaker"></div>
        <div class="clickable-object" id="obj-clock" data-id="clock"></div>
        <div class="clickable-object" id="obj-pencilcase" data-id="pencilcase"></div>
        <div class="clickable-object" id="obj-door" data-id="door"></div>
        <div id="hint-inventory">
            <strong>íšë“í•œ ë¹„ë°€ë²ˆí˜¸ ì¡°ê°:</strong>
        </div>
    </div>

    <div id="modal-container">
        <div id="modal-content"></div>
    </div>

    <script>
        const gameState = {
            playerName: "",
            solvedPuzzles: [],
            finalPassword: "2025"
        };

        const elements = {
            startScreen: document.getElementById('start-screen'),
            startButton: document.getElementById('start-button'),
            nameInput: document.getElementById('name-input'),
            gameContainer: document.getElementById('game-container'),
            modalContainer: document.getElementById('modal-container'),
            modalContent: document.getElementById('modal-content'),
            hintInventory: document.getElementById('hint-inventory'),
            clickableObjects: document.querySelectorAll('.clickable-object'),
        };
        
        const puzzles = {
            monitor: { type: 'minigame', hint: '20' },
            speaker: { type: 'quiz', name: 'ìŠ¤í”¼ì»¤', question: 'ë¬¼ì— ë¹ ì§„ ì‚¬ëŒì„ ë°œê²¬í–ˆì„ ë•Œ, ì§ì ‘ ë¬¼ì— ë›°ì–´ë“œëŠ” ê²ƒë³´ë‹¤ ë” ì•ˆì „í•œ í–‰ë™ì€?', answer: 'ì£¼ë³€ ì–´ë¥¸ì—ê²Œ ì•Œë¦¬ê¸°', hint: '25' },
            clock: { type: 'quiz', name: 'ì‹œê³„', question: 'ë¬¼ë†€ì´ ì „, ìµœì†Œ ëª‡ ë¶„ ì´ìƒ ì¤€ë¹„ìš´ë™ì„ í•´ì•¼ ì‹¬ì¥ë§ˆë¹„ë¥¼ ì˜ˆë°©í•  ìˆ˜ ìˆì„ê¹Œìš”? (ìˆ«ìë§Œ ì…ë ¥)', answer: '10' },
            pencilcase: { type: 'hint', text: 'ì•ˆì „ ìˆ˜ì¹™ íŒíŠ¸: ë¬¼ë†€ì´ ì¤‘ì—ëŠ” ê»Œì´ë‚˜ ì‚¬íƒ•ì„ ë¨¹ì§€ ì•Šë„ë¡ í•´ìš”! ëª©ì— ê±¸ë¦¬ë©´ ì•„ì£¼ ìœ„í—˜í•´ìš”.' },
            door: { type: 'escape' }
        };

        elements.startButton.addEventListener('click', () => {
            const playerName = elements.nameInput.value.trim();
            if (playerName === "") {
                alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
                return;
            }
            gameState.playerName = playerName;
            elements.startScreen.style.display = 'none';
            elements.gameContainer.style.display = 'block';
        });

        function showModal(htmlContent) { elements.modalContent.innerHTML = htmlContent; elements.modalContainer.style.display = 'flex'; }
        function closeModal() { elements.modalContainer.style.display = 'none'; elements.modalContent.innerHTML = ''; }
        function markAsSolved(id) { gameState.solvedPuzzles.push(id); document.getElementById(`obj-${id}`).classList.add('solved'); }
        function addHintToInventory(hint) { const hintSpan = document.createElement('span'); hintSpan.textContent = hint; elements.hintInventory.appendChild(hintSpan); }

        elements.clickableObjects.forEach(obj => {
            obj.addEventListener('click', (e) => {
                const id = e.target.dataset.id;
                if (gameState.solvedPuzzles.includes(id)) { alert('ì—¬ê¸°ëŠ” ì´ë¯¸ í™•ì¸í–ˆì–´ìš”!'); return; }
                const puzzle = puzzles[id];
                switch(puzzle.type) {
                    case 'minigame': launchMemoryGame(id); break;
                    case 'quiz': launchQuiz(id); break;
                    case 'hint': launchHint(id); break;
                    case 'escape': launchEscape(id); break;
                }
            });
        });

        function launchHint(id) { const puzzle = puzzles[id]; alert(puzzle.text); markAsSolved(id); }
        function launchQuiz(id) {
            const puzzle = puzzles[id];
            const content = `<h2>í€´ì¦ˆ: ${puzzle.name}</h2><p>${puzzle.question}</p><input type="text" id="quiz-answer" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”"><button id="quiz-submit">ì •ë‹µ í™•ì¸</button><button class="close-btn" onclick="closeModal()">ë‹«ê¸°</button>`;
            showModal(content);
            document.getElementById('quiz-submit').addEventListener('click', () => {
                const answer = document.getElementById('quiz-answer').value.trim();
                if (answer === puzzle.answer) {
                    if (puzzle.hint) { alert(`ì •ë‹µ! ë¹„ë°€ë²ˆí˜¸ ì¡°ê° [${puzzle.hint}]ì„(ë¥¼) íšë“í–ˆìŠµë‹ˆë‹¤!`); addHintToInventory(puzzle.hint); } 
                    else { alert('ì •ë‹µì…ë‹ˆë‹¤! ì¤‘ìš”í•œ ì•ˆì „ ìƒì‹ì´êµ°ìš”.'); }
                    markAsSolved(id); closeModal();
                } else { alert('í‹€ë ¸ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ìƒê°í•´ ë³´ì„¸ìš”!'); }
            });
        }
        function launchMemoryGame(id) {
            const puzzle = puzzles[id];
            const content = `<h2>ë¯¸ë‹ˆê²Œì„: ì•ˆì „ ë¬¼ë†€ì´ ì¹´ë“œ ë§ì¶”ê¸°</h2><p>ê°™ì€ ì•ˆì „ ìˆ˜ì¹™ ì•„ì´ì½˜ ì¹´ë“œë¥¼ ëª¨ë‘ ì°¾ì•„ì£¼ì„¸ìš”!</p><div id="memory-board"></div><button class="close-btn" onclick="closeModal()">í¬ê¸°í•˜ê¸°</button>`;
            showModal(content);
            const board = document.getElementById('memory-board');
            const icons = ['ğŸ©', 'ğŸ©', 'ğŸ¦º', 'ğŸ¦º', 'ğŸ¤¸', 'ğŸ¤¸', 'ğŸ”¥', 'ğŸ”¥'];
            icons.sort(() => 0.5 - Math.random());
            let flippedCards = [], matchedPairs = 0;
            icons.forEach(icon => {
                const card = document.createElement('div');
                card.classList.add('card'); card.dataset.icon = icon;
                card.innerHTML = `<div class="front"></div><div class="back">${icon}</div>`;
                board.appendChild(card);
                card.addEventListener('click', () => {
                    if (card.classList.contains('flipped') || flippedCards.length === 2) return;
                    card.classList.add('flipped'); flippedCards.push(card);
                    if (flippedCards.length === 2) {
                        const [card1, card2] = flippedCards;
                        if (card1.dataset.icon === card2.dataset.icon) {
                            card1.classList.add('matched'); card2.classList.add('matched'); matchedPairs++; flippedCards = [];
                            if (matchedPairs === icons.length / 2) { setTimeout(() => { alert(`ì„±ê³µ! ë¹„ë°€ë²ˆí˜¸ ì¡°ê° [${puzzle.hint}]ì„(ë¥¼) íšë“í–ˆìŠµë‹ˆë‹¤!`); addHintToInventory(puzzle.hint); markAsSolved(id); closeModal(); }, 500); }
                        } else { setTimeout(() => { card1.classList.remove('flipped'); card2.classList.remove('flipped'); flippedCards = []; }, 1000); }
                    }
                });
            });
        }
        function launchEscape() {
            const content = `<h2>êµì‹¤ ë¬¸</h2><p>ìˆ˜ì—…ì—ì„œ ë°°ìš´ íŒíŠ¸ë“¤ì„ ì¡°í•©í•˜ì—¬ ë„¤ ìë¦¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ê³  íƒˆì¶œí•˜ì„¸ìš”!</p><input type="text" id="password-input" placeholder="ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬" maxlength="4" style="letter-spacing: 5px;"><button id="escape-button">íƒˆì¶œ ì‹œë„</button><button class="close-btn" onclick="closeModal()">ëŒì•„ê°€ê¸°</button>`;
            showModal(content);
            document.getElementById('escape-button').addEventListener('click', () => {
                const inputPassword = document.getElementById('password-input').value;
                if (inputPassword === gameState.finalPassword) {
                    alert(`${gameState.playerName}ë‹˜, ì •ë‹µì…ë‹ˆë‹¤! ğŸ‰\nì•ˆì „í•œ ë¬¼ë†€ì´ ìˆ˜ì¹™ì„ ëª¨ë‘ ê¸°ì–µí•˜ê³  êµì‹¤ì„ íƒˆì¶œí•©ë‹ˆë‹¤!`);
                    elements.modalContent.innerHTML = `<h2>íƒˆì¶œ ì„±ê³µ!</h2><p>${gameState.playerName}ë‹˜, ì˜¬ì—¬ë¦„ ì•ˆì „í•˜ê³  ì¦ê±°ìš´ ë¬¼ë†€ì´ í•˜ì„¸ìš”!</p>`;
                    document.getElementById('game-container').style.filter = 'blur(5px)';
                } else {
                    alert('ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤. íšë“í•œ íŒíŠ¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ë³´ì„¸ìš”.');
                }
            });
        }
    </script>
</body>
</html>